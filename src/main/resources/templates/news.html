<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>News</title>
    <link href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <form method="GET" th:action="@{/search}">
        <div class="row g-3">
            <div class="col-md-2">
                <select class="form-select" id="country" name="country">
                    <option>Country</option>
                    <option value="ar" th:selected="${countries eq 'ar'}">Argentina</option>
                    <option value="au" th:selected="${countries eq 'au'}">Australia</option>
                    <option value="at" th:selected="${countries eq 'at'}">Austria</option>
                    <option value="be" th:selected="${countries eq 'be'}">Belgium</option>
                    <option value="br" th:selected="${countries eq 'br'}">Brazil</option>
                    <option value="bg" th:selected="${countries eq 'bg'}">Bulgaria</option>
                    <option value="ca" th:selected="${countries eq 'ca'}">Canada</option>
                    <option value="cn" th:selected="${countries eq 'cn'}">China</option>
                    <option value="co" th:selected="${countries eq 'co'}">Colombia</option>
                    <option value="cz" th:selected="${countries eq 'cz'}">Czech Republic</option>
                    <option value="eg" th:selected="${countries eq 'eg'}">Egypt</option>
                    <option value="fr" th:selected="${countries eq 'fr'}">France</option>
                    <option value="de" th:selected="${countries eq 'de'}">Germany</option>
                    <option value="gr" th:selected="${countries eq 'gr'}">Greece</option>
                    <option value="hk" th:selected="${countries eq 'hk'}">Hong Kong</option>
                    <option value="hu" th:selected="${countries eq 'hu'}">Hungary</option>
                    <option value="in" th:selected="${countries eq 'in'}">India</option>
                    <option value="id" th:selected="${countries eq 'id'}">Indonesia</option>
                    <option value="ie" th:selected="${countries eq 'ie'}">Ireland</option>
                    <option value="il" th:selected="${countries eq 'il'}">Israel</option>
                    <option value="it" th:selected="${countries eq 'it'}">Italy</option>
                    <option value="jp" th:selected="${countries eq 'jp'}">Japan</option>
                    <option value="lv" th:selected="${countries eq 'lv'}">Latvia</option>
                    <option value="lt" th:selected="${countries eq 'lt'}">Lithuania</option>
                    <option value="my" th:selected="${countries eq 'my'}">Malaysia</option>
                    <option value="mx" th:selected="${countries eq 'mx'}">Mexico</option>
                    <option value="ma" th:selected="${countries eq 'ma'}">Morocco</option>
                    <option value="nl" th:selected="${countries eq 'nl'}">Netherlands</option>
                    <option value="nz" th:selected="${countries eq 'nz'}">New Zealand</option>
                    <option value="ng" th:selected="${countries eq 'ng'}">Nigeria</option>
                    <option value="no" th:selected="${countries eq 'no'}">Norway</option>
                    <option value="ph" th:selected="${countries eq 'ph'}">Philippines</option>
                    <option value="pl" th:selected="${countries eq 'pl'}">Poland</option>
                    <option value="pt" th:selected="${countries eq 'pt'}">Portugal</option>
                    <option value="ro" th:selected="${countries eq 'ro'}">Romania</option>
                    <option value="sa" th:selected="${countries eq 'sa'}">Saudi Arabia</option>
                    <option value="rs" th:selected="${countries eq 'rs'}">Serbia</option>
                    <option value="sg" th:selected="${countries eq 'sg'}">Singapore</option>
                    <option value="sk" th:selected="${countries eq 'sk'}">Slovakia</option>
                    <option value="si" th:selected="${countries eq 'si'}">Slovenia</option>
                    <option value="za" th:selected="${countries eq 'za'}">South Africa</option>
                    <option value="kr" th:selected="${countries eq 'kr'}">South Korea</option>
                    <option value="se" th:selected="${countries eq 'se'}">Sweden</option>
                    <option value="ch" th:selected="${countries eq 'ch'}">Switzerland</option>
                    <option value="tw" th:selected="${countries eq 'tw'}">Taiwan</option>
                    <option value="th" th:selected="${countries eq 'th'}">Thailand</option>
                    <option value="tr" th:selected="${countries eq 'tr'}">Turkey</option>
                    <option value="ua" th:selected="${countries eq 'ua'}">Ukraine</option>
                    <option value="ae" th:selected="${countries eq 'ae'}">United Arab Emirates</option>
                    <option value="gb" th:selected="${countries eq 'gb'}">United Kingdom</option>
                    <option value="us" th:selected="${countries eq 'us'}">United States</option>
                    <option value="ve" th:selected="${countries eq 've'}">Venezuela</option>
                </select>
            </div>
            <div class="col-md-2">
                <select class="form-select" id="language" name="language">
                    <option>Language</option>
                    <option value="ar" th:selected="${languages eq 'ar'}">Arabic</option>
                    <option value="de" th:selected="${languages eq 'de'}">German</option>
                    <option value="en" th:selected="${languages eq 'en'}">English</option>
                    <option value="es" th:selected="${languages eq 'es'}">Spanish</option>
                    <option value="fr" th:selected="${languages eq 'fr'}">French</option>
                    <!--                    <option value="he" th:selected="${languages eq 'he'}">Hebrew</option>-->
                    <option value="it" th:selected="${languages eq 'it'}">Italian</option>
                    <option value="nl" th:selected="${languages eq 'nl'}">Dutch</option>
                    <option value="no" th:selected="${languages eq 'no'}">Norwegian</option>
                    <option value="pt" th:selected="${languages eq 'pt'}">Portuguese</option>
                    <option value="ru" th:selected="${languages eq 'ru'}">Russian</option>
                    <option value="sv" th:selected="${languages eq 'sv'}">Swedish</option>
                    <option value="zh" th:selected="${languages eq 'zh'}">Chinese</option>
                </select>
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" name="source" placeholder="Source" th:value="${sources}">
            </div>
            <div class="col-md-2">
                <select class="form-select" name="category">
                    <option>Category</option>
                    <option value="general" th:selected="${categories eq 'general'}">General</option>
                    <option value="business" th:selected="${categories eq 'business'}">Business</option>
                    <option value="entertainment" th:selected="${categories eq 'entertainment'}">Entertainment</option>
                    <option value="health" th:selected="${categories eq 'health'}">Health</option>
                    <option value="science" th:selected="${categories eq 'science'}">Science</option>
                    <option value="sports" th:selected="${categories eq 'sports'}">Sports</option>
                    <option value="technology" th:selected="${categories eq 'technology'}">Technology</option>
                </select>
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" name="keywords" placeholder="Keywords" th:value="${keywords}">
            </div>
            <div class="col-md-2">
                <input type="date" class="form-control" name="date" th:value="${date}">
            </div>
            <div class="col-md-1">
                <button type="submit" class="btn btn-primary" style="width: 95px">Search</button>
            </div>
            <div class="col-md-1">
                <a class="btn btn-primary" style="width: 95px" href="/">Clear</a>
            </div>
        </div>
    </form>
</div>

<div class="container my-5">
    <div class="row g-3 mb-1">
        <div class="col-md-1">
            <button onClick="window.location.reload();" class="btn btn-success" style="width: 115px">Update</button>
        </div>
    </div>

    <table id="newsArticles" class="table table-borderless table-responsive card-1 p-4">
        <thead>
        <tr class="border-bottom">
            <th><span class="ml-2 p-2">Published</span></th>
            <th><span class="ml-2 p-2">Article</span></th>
            <th><span class="ml-2 p-2">Source</span></th>
            <th><span class="ml-2 p-2">Category</span></th>
            <th><span class="ml-2 p-2">Country</span></th>
            <th><span class="ml-2 p-2">Language</span></th>
            <th><span class="ml-4 p-2">Read</span></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="article : ${news}" class="border-bottom">
            <td>
                <div class="p-2 d-flex flex-column">
                    <span th:text="${#temporals.format(article.publishedAt, 'yyyy-MM-dd HH:mm:ss')}"
                          class="d-block font-weight-bold"></span>
                </div>
            </td>
            <td>
                <div class="p-2 d-flex flex-row align-items-center mb-2">
                    <div class="d-flex flex-column ml-2">
                        <span th:text="${article.title}" class="d-block font-weight-bold"></span>
                        <small th:text="${article.description}" class="text-muted"></small>
                    </div>
                </div>
            </td>
            <td>
                <div class="p-2 d-flex flex-column"><span th:text="${article.source}"></span></div>
            </td>
            <td>
                <div class="p-2 d-flex flex-column text-capitalize"><span th:text="${article.category}"></span></div>
            </td>
            <td>
                <div class="p-2 d-flex flex-column"><span
                        th:text="${article.country != null} ? ${article.country.name}"></span></div>
                <!--                <div class="p-2 d-flex flex-column"><span th:text="${article.country.name}"></span></div>-->
            </td>
            <td>
                <div class="p-2 d-flex flex-column"><span
                        th:text="${article.language != null} ? ${article.language.name}"></span></div>
                <!--                <div class="p-2 d-flex flex-column"><span th:text="${article.language.name}"></span></div>-->
            </td>
            <td>
                <div class="p-2 icons">
                    <a th:href="${article.url}" target="_blank"><i class="fa fa-share"></i></a></div>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.min.js"></script>
<script>
$(document).ready(function() {
    $('#newsArticles').DataTable({
    "order": []
});
} );
</script>
</body>

</html>